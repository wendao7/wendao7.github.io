<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <title>
        网络-02-HTTP-下 |
        
        win的博客
    </title>
    <link rel="shortcut icon" href="/images/logo.svg">
    
<link rel="stylesheet" href="/css/style.css">

    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.0.4/source/css/font-awesome.min.css">
    <script id="hexo-configurations">
    let KEEP = window.KEEP || {};
    KEEP.hexo_config = {"hostname":"example.com","root":"/"};
    KEEP.theme_config = {"toc":{"enable":true,"number":false,"expand_all":true},"style":{"primary_color":"#0066CC","avatar":"/images/avatar.png","favicon":"/images/logo.svg","img_position":"left","left_side_width":"260px","content_max_width":"900px","hover":{"shadow":true,"scale":false},"first_screen":{"enable":true,"background_img":"/images/bg.svg","description":"小小技术, 大大无聊."}},"local_search":{"enable":false,"trigger":"auto","unescape":false,"preload":false},"version":"3.0.4"};
    KEEP.language = "search: Search...\nprev: Prev\nnext: Next\nprev_posts: Prev posts\nnext_posts: Next posts\npage: Page %d\nrecent_posts: Recent Posts\nshare: Share\npowered_by: \"Powered by %s\"\ntheme: Theme\nrss_feed: RSS Feed\ncategory: Category\ncategories: Categories\ntag: Tag\ntags: Tags\ntagcloud: Tag Cloud\ncomment: Comment\nhome: Home\narchive: Archive\narchives: Archives\nabout: About\nsite_uv: Visitor Count\nsite_pv: Totalview\nlinks: Links\nlink: Link\ntop: TOP\nread_more: Read more\nwordcount: Words\nmin2read: Mins\nchangelog: Changelog\ncopyright:\n  author: Post author\n  title: Post title\n  link: Post link\n  create_time: Create time\n  license_title: Copyright Notice\n  license_content: \"All articles in this blog are licensed under %s unless stating additionally.\"\nago:\n  second: \"%s seconds ago\"\n  minute: \"%s minutes ago\"\n  hour: \"%s hours ago\"\n  day: \"%s days age\"\n  week: \"%s weeks age\"\n  month: \"%s months age\"\n  year: \"%s years age\"\n";
  </script>
<meta name="generator" content="Hexo 5.4.0"></head>


<body>
<div class="page-container">

    

    <header class="page-header">
        <div class="header-progress"></div>
    </header>

    <main class="page-main">

        <div class="page-main-content">

            <div class="page-main-content-top">
                <header class="header-wrapper">

    <div class="header-content">
        <a class="logo-title" href="/">
            win的博客
        </a>

        <ul class="menu-list">
            
                <li class="menu-item">
                    <a class=""
                       href="/"
                    >
                        HOME
                    </a>
                </li>
            
                <li class="menu-item">
                    <a class=""
                       href="/archives"
                    >
                        ARCHIVES
                    </a>
                </li>
            
                <li class="menu-item">
                    <a class=""
                       href="/links"
                    >
                        LINKS
                    </a>
                </li>
            
                <li class="menu-item">
                    <a class=""
                       href="/about"
                    >
                        ABOUT
                    </a>
                </li>
            
        </ul>

        <div class="menu-bar">
            <div class="menu-bar-middle"></div>
        </div>
    </div>

    <div class="header-drawer">
        <ul class="drawer-menu-list">
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/">HOME</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/archives">ARCHIVES</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/links">LINKS</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/about">ABOUT</a>
                </li>
            
        </ul>
    </div>

    <div class="window-mask"></div>

</header>


            </div>

            <div class="page-main-content-middle">

                <main class="main-content normal-code-theme">

                    
                        <div class="fade-in-down-animation">
    <div class="article-content-container">

        <div class="article-title">
            <span class="title-hover-animation">网络-02-HTTP-下</span>
        </div>

        
            <div class="article-header">
                <div class="avatar">
                    <img src="/images/avatar.png">
                </div>
                <div class="info">
                    <div class="author">
                        <span>win</span>
                        <span class="level">Lv8</span>
                    </div>
                    <div class="meta-info">
                        <div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fas fa-calendar"></i> 2021-06-12 18:42:38
    </span>
    
    

    
    
    
    
</div>

                    </div>
                </div>
            </div>
        

        <div class="article-content markdown-body">
            <h3 id="5-HTTPS如何优化"><a href="#5-HTTPS如何优化" class="headerlink" title="5 HTTPS如何优化"></a>5 HTTPS如何优化</h3><h4 id="5-1-分析性能损耗"><a href="#5-1-分析性能损耗" class="headerlink" title="5.1 分析性能损耗"></a>5.1 分析性能损耗</h4><blockquote>
<p>产生性能损耗的两个环节</p>
</blockquote>
<ul>
<li>TLS协议握手过程</li>
<li>握手后的对称加密报文传输</li>
</ul>
<img src="/images/网络/02_05_HTTPS-TLS握手性能损失.jpg" width="80%" height="80%">

<h4 id="5-2-硬件优化"><a href="#5-2-硬件优化" class="headerlink" title="5.2 硬件优化"></a>5.2 硬件优化</h4><p>HTTPS协议是计算密集型，而不是I/O密集型，提升CPU性能，查看CPU是否支持AES指令<code>sort -u /proc/crypto | grep module | grep aes</code></p>
<h4 id="5-3-软件优化"><a href="#5-3-软件优化" class="headerlink" title="5.3 软件优化"></a>5.3 软件优化</h4><p>软件升级，最新版本不仅提供了最新的特性，也优化了以前软件的问题或者性能；但是存在风险，耗费人力。</p>
<h4 id="5-4-协议优化"><a href="#5-4-协议优化" class="headerlink" title="5.4 协议优化"></a>5.4 协议优化</h4><h5 id="5-4-1-密钥交换算法优化"><a href="#5-4-1-密钥交换算法优化" class="headerlink" title="5.4.1 密钥交换算法优化"></a>5.4.1 密钥交换算法优化</h5><ul>
<li>使用ECDHE密钥交换算法<ul>
<li>TLS1.2如果使用RSA密钥交换算法，需要4次握手后(2 RTT)才可以进行应用数据的传输，且RSA算法不具备前向安全性。选用 ECDHE 密钥交换算法替换 RSA 算法，客户端可以在 TLS 协议的第 3 次握手后，第 4 次握手前，发送加密的应用数据，以此将 TLS 握手的消息 往返由 2 RTT 减少到 1 RTT，而且安全性也高，具备前向安全性。</li>
</ul>
</li>
<li>使用x25519曲线<ul>
<li><code>ssl_ecdh_curve X25519:secp384r1</code></li>
</ul>
</li>
<li>对称加密算法使用 AES_128_GCM</li>
</ul>
<h4 id="5-5-TLS升级"><a href="#5-5-TLS升级" class="headerlink" title="5.5 TLS升级"></a>5.5 TLS升级</h4><ul>
<li>TLS1.3握手只要1 RTT，且安全性更高</li>
<li>对于密钥交换算法，废除了不支持前向安全性的 RSA 和 DH 算法，只支持 ECDHE 算法</li>
</ul>
<h4 id="5-6-证书优化"><a href="#5-6-证书优化" class="headerlink" title="5.6 证书优化"></a>5.6 证书优化</h4><h5 id="5-6-1-证书传输优化"><a href="#5-6-1-证书传输优化" class="headerlink" title="5.6.1 证书传输优化"></a>5.6.1 证书传输优化</h5><p>选择ECDSA证书，而不是RSA证书，因为在相同的安全强度下，ECC密钥长度比RSA短的多</p>
<h5 id="5-6-2-证书验证优化"><a href="#5-6-2-证书验证优化" class="headerlink" title="5.6.2 证书验证优化"></a>5.6.2 证书验证优化</h5><ul>
<li>用CA公钥解密证书</li>
<li>用签名算法验证证书的完整性</li>
<li>访问CA，下载CRL或者OCSP数据，确认证书的有效性<ul>
<li>CRL：证书吊销列表 Certificate Revocation List<ul>
<li>实时性不好</li>
<li>随着吊销证书的增多，列表会越来越大，下载速度就会越慢，下载完还得遍历</li>
</ul>
</li>
<li>OCSP：在线证书状态协议(Online Certificate Status Protocol)<ul>
<li>向 CA 发送查询请求，让 CA 返回证书的有效状态</li>
<li>依赖网络状态或者CA服务器是否繁忙</li>
</ul>
</li>
<li>OCSP Stapling：服务器向 CA 周期性地查询证书状态，获得 一个带有时间戳和签名的响应结果并缓存它</li>
</ul>
</li>
</ul>
<h3 id="5-7-会话复用"><a href="#5-7-会话复用" class="headerlink" title="5.7 会话复用"></a>5.7 会话复用</h3><h4 id="5-7-1-Session-ID"><a href="#5-7-1-Session-ID" class="headerlink" title="5.7.1 Session ID"></a>5.7.1 Session ID</h4><p>客户端和服务器首次 TLS 握手连接后，双方会在内存缓存会话密钥，并用唯一的 Session ID 来标识，Session ID 和会话密钥相当于 key-value 的关系<br><img src="/images/网络/02_05_SessionID.jpg" width="80%" height="80%"></p>
<ul>
<li>缺点<ul>
<li>服务器必须保持每一个客户端的会话密钥</li>
<li>负载均衡情况下，客户端的再次连接不一定会命中上次访问过的服务器，于是还要走完整的TLS握手过程</li>
</ul>
</li>
</ul>
<h4 id="5-7-2-Session-Ticket"><a href="#5-7-2-Session-Ticket" class="headerlink" title="5.7.2 Session Ticket"></a>5.7.2 Session Ticket</h4><p>客户端与服务器首次建立连接时，服务器会加密「会话密钥」作为 Ticket 发给客户端，交给客户端缓存该 Ticket<br><img src="/images/网络/02_05_SessionTicket.jpg" width="80%" height="80%"></p>
<h4 id="5-7-3-Pre-shared-Key"><a href="#5-7-3-Pre-shared-Key" class="headerlink" title="5.7.3 Pre-shared Key"></a>5.7.3 Pre-shared Key</h4><p>对于􏰁连 TLS1.3 只需要 0 RTT，原理和 Ticket 类似，只不过在􏰁连时，客户端会把 Ticket和 HTTP 请求一同发送给服务端，这种方式叫 Pre-shared Key<br>应对􏰁放攻击可以给会话密钥设定一个合理的过期时间，以及只针对安全的 HTTP 请求如 GET/HEAD 使用 会话􏰁用。</p>
<h3 id="6-HTTP-2特性"><a href="#6-HTTP-2特性" class="headerlink" title="6 HTTP/2特性"></a>6 HTTP/2特性</h3><h4 id="6-1-HTTP-1-1-协议的性能问题"><a href="#6-1-HTTP-1-1-协议的性能问题" class="headerlink" title="6.1 HTTP/1.1 协议的性能问题"></a>6.1 HTTP/1.1 协议的性能问题</h4><ul>
<li>延迟难以下降</li>
<li>并发连接有限</li>
<li>队头阻塞问题</li>
<li>HTTP头部巨大且重复</li>
<li>不支持服务器推送消息</li>
</ul>
<h4 id="6-2-兼容HTTP-1-1"><a href="#6-2-兼容HTTP-1-1" class="headerlink" title="6.2 兼容HTTP/1.1"></a>6.2 兼容HTTP/1.1</h4><ul>
<li>HTTP/2没有在URI里引入新的协议名，仍然用<code>http://</code>表示明文协议，<code>http://</code>表示加密协议</li>
<li>只在应用层做了改变，还是基于TCP协议传输</li>
</ul>
<h4 id="6-3-头部压缩"><a href="#6-3-头部压缩" class="headerlink" title="6.3 头部压缩"></a>6.3 头部压缩</h4><blockquote>
<p>HTTP/1.1报文中Header部分存在的问题</p>
</blockquote>
<ul>
<li>含有很多固定的字段</li>
<li>大量请求和响应的报文里有很多字段值是重复的</li>
<li>字段是ASCII编码，虽易于人类观察，但是效率低</li>
</ul>
<p>客户端和服务器两端都会建立和维护「字典」，用⻓度较小的索引号表示重􏰁复的字符串，再用 Huffman 编码压 数据，可达到 50%~90% 的高压缩率</p>
<h5 id="6-3-1-静态表编码"><a href="#6-3-1-静态表编码" class="headerlink" title="6.3.1 静态表编码"></a>6.3.1 静态表编码</h5><p>HTTP/2为高频出现在头部的字符串和字段建立了一张静态表，不会变化，共61组；Index表示索引，Header Value表示索引对应的Value，Header Name表示字段的名字</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">server: nghttpx\r\n</span><br><span class="line">在统计大􏰀的 HTTP 头部后，HTTP/2 根据出现频率将 ASCII 码编码为了 Huffman 编码表，Huffman编码的原理是将高频出现的信息用较短的编码表示，从而缩减字符串长度</span><br></pre></td></tr></table></figure>
<img src="/images/网络/02_06_静态表编码.jpg" width="80%" height="80%">

<h5 id="6-3-2-动态表编码"><a href="#6-3-2-动态表编码" class="headerlink" title="6.3.2 动态表编码"></a>6.3.2 动态表编码</h5><p>静态表只包含了 61 种高频出现在头部的字符串，不在静态表范围内的头部字符串就要自行构建动态表，它的 Index 从 62 起步，会在编码解码的时候随时更新</p>
<h4 id="6-4-二级制帧"><a href="#6-4-二级制帧" class="headerlink" title="6.4 二级制帧"></a>6.4 二级制帧</h4><img src="/images/网络/02_06_二进制帧.jpg" width="80%" height="80%">

<p>HTTP/2把响应报文划分为两个帧，HEADERS(首部)和DATA(消息负载)是帧的类型</p>
<img src="/images/网络/02_06_二进制帧结构.jpg" width="80%" height="80%">

<p>帧头的最后4个字节是流标识符，它的作用是用来标识该 Fream 属于哪个 Stream，接收方可以根据这个信息从乱序的帧 里找到相同 Stream ID 的帧，从而有序组装信息<br>帧数据存放的是通过 HPACK 算法压缩过的 HTTP 头部和包体</p>
<h4 id="6-5-并发传输"><a href="#6-5-并发传输" class="headerlink" title="6.5 并发传输"></a>6.5 并发传输</h4><p>HTTP/2通过 Stream 这个设计，多个 Stream 复用一条 TCP 连接，达到并发的效果，解决了 HTTP/1.1 队头阻塞的问题，提高了 HTTP 传输的吞吐􏰀</p>
<img src="/images/网络/02_06_HTTP2并发连接.jpg" width="80%" height="80%">

<p>HTTP 消息可以由多个 Frame 构成，以及 1 个 Frame 可以由多个 TCP 报文构成。在 HTTP/2 连接上，不同 Stream 的帧是可以乱序发送的(因此可以并发不同的 Stream )，因为每个帧的头部会 携带 Stream ID 信息，所以接收端可以通过 Stream ID 有序组装成 HTTP 消息，而同一 Stream 内部的帧必须是严格有序的<br>客户端和服务器双方都可以建立 Stream， Stream ID 也是有区别的，客户端建立的 Stream 必须是奇数号，而服 务器建立的 Stream 必须是偶数号。<br>同一个连接中的 Stream ID 是不能复用的，只能顺序递增，所以当 Stream ID 耗尽时，需要发一个控制帧 GOAWAY ，用来关闭 TCP 连接<br>HTTP/2 还可以对每个 Stream 设置不同优先级，帧头中的「标志位」可以设置优先级</p>
<h4 id="6-6-服务器主动推送资源"><a href="#6-6-服务器主动推送资源" class="headerlink" title="6.6 服务器主动推送资源"></a>6.6 服务器主动推送资源</h4><p>服务器推送资源时，会先发送 PUSH_PROMISE帧，告诉客户端接下来在哪个 Stream 发送资源，然后用偶数号 Stream 发送资源给客户端</p>
<img src="/images/网络/02_07_服务器主动推送.jpg" width="80%" height="80%">

<h3 id="7-HTTP-3特性"><a href="#7-HTTP-3特性" class="headerlink" title="7 HTTP/3特性"></a>7 HTTP/3特性</h3><h4 id="7-1-HTTP-2缺陷"><a href="#7-1-HTTP-2缺陷" class="headerlink" title="7.1 HTTP/2缺陷"></a>7.1 HTTP/2缺陷</h4><blockquote>
<p>队头阻塞</p>
</blockquote>
<img src="/images/网络/02_07_TCP队头阻塞.jpg" width="80%" height="80%">

<ul>
<li>HTTP/2 多个请求是跑在一个 TCP 连接中的，那么当 TCP 丢包时，整个 TCP 都要等待􏰁重传，那么就会阻塞该 TCP 连接中的所有请求。</li>
<li>因为 TCP 是字节流协议，TCP 层必须保证收到的字节数据是完整且有序的，如果序列号较低的 TCP 段在网络传输 中丢失了，即使序列号较高的 TCP 段已经被接收了，应用层也无法从内核中读取到这部分数据，从 HTTP 视⻆ 看，就是请求被阻塞了</li>
</ul>
<blockquote>
<p>TCP 与 TLS 的握手时延迟</p>
</blockquote>
<ul>
<li>发起 HTTP 请求时，需要经过 TCP 三次握手和 TLS 四次握手(TLS 1.2)的过程，因此共需要 3 个 RTT 的时延才能发出请求数据</li>
<li>TCP 由于具有「拥塞控制」的特性，所以刚建立连接的 TCP 会有个「慢启动」的过程，它会对 TCP 连接 产生”减速”效果</li>
</ul>
<img src="/images/网络/02_07_握手时延.jpg" width="80%" height="80%">

<blockquote>
<p>网络迁移需要􏰁新连接</p>
</blockquote>
<p>一个 TCP 连接是由四元组(源 IP 地址，源端口，目标 IP 地址，目标端口)确定的，这意味着如果 IP 地址或者端 口变动了，就会导致需要 TCP 与 TLS 􏰁新握手，这不利于移动设备切换网络的场景</p>
<img src="/images/网络/02_07_HTTP23对比.jpg" width="80%" height="80%">

<h4 id="7-2-QUIC协议"><a href="#7-2-QUIC协议" class="headerlink" title="7.2 QUIC协议"></a>7.2 QUIC协议</h4><blockquote>
<p>无队头阻塞</p>
</blockquote>
<img src="/images/网络/02_07_无队头阻塞.jpg" width="80%" height="80%">

<ul>
<li>QUIC 协议也有类似 HTTP/2 Stream 与多路复用的概念，也是可以在同一条连接上并发传输多个 Stream，Stream 可以认为就是一条 HTTP 请求</li>
<li>QUIC 协议会保证数据包的可靠性，每个数据包都有一个序号唯一标识。当某个流中的一个数据包丢失了，即使该流的其他数据包到达了，数据也无法被 HTTP/3 读取，直到 QUIC 􏰁传丢失的报文，数据才会交给 HTTP/3</li>
<li>QUIC 连接上的多个 Stream 之间并没有依赖，都是独立的，某个流发生丢包了，只会影响该流，其他流不受影响</li>
</ul>
<blockquote>
<p>更快的连接建立</p>
</blockquote>
<ul>
<li>HTTP/3 在传输数据前虽然需要 QUIC 协议握手，这个握手过程只需要 1 RTT，握手的目的是为确认双方的「连接 ID」，连接迁移就是基于连接 ID 实现的</li>
<li>QUIC 内部包含了 TLS，它在自己的帧会携带 TLS 里的“记 录”，再加上 QUIC 使用的是 TLS1.3，因此仅需 1 个 RTT 就可以「同时」完成建立连接与密钥协商，甚至在第二 次连接的时候，应用数据包可以和 QUIC 握手信息(连接信息 + TLS 信息)一起发送，达到 0-RTT 的效果</li>
</ul>
<blockquote>
<p>连接迁移</p>
</blockquote>
<ul>
<li>QUIC协议通过连接 ID来标记通信的两个端点，客户端和服务器可以各 自选择一组 ID 来标记自己，因此即使移动设备的网络变化后，导致 IP 地址变化了，只要仍保有上下文信息(比如 连接 ID、TLS 密钥等)，就可以“无缝”地复用原连接，消除􏰁连的成本</li>
</ul>
<h4 id="7-3-HTTP-3协议"><a href="#7-3-HTTP-3协议" class="headerlink" title="7.3 HTTP/3协议"></a>7.3 HTTP/3协议</h4><img src="/images/网络/02_07_HTTP3协议格式.jpg" width="80%" height="80%">

<ul>
<li>HTTP/3 帧头只有两个字段:类型和⻓度</li>
<li>静态表的变化，HTTP/2 中的 HPACK 的静态表只有 61 项，而 HTTP/3 中的 QPACK 的静态表扩大到 91 项</li>
<li>动态表<ul>
<li>动态表是具有时序性的，如果首次出现的请求发生了丢包，后续的收到请求，对方就无法解码出 HPACK 头部，因为对方还没建立好动态表，因此后续的请求解码会阻塞到首次请求中丢失的数据包重传过来</li>
<li>QUIC 会有两个特殊的单向流<ul>
<li>一个叫 QPACK Encoder Stream， 用于将一个字典(key-value)传递给对方，比如面对不属于静态表的 HTTP 请求头部，客户端可以通过这个 Stream 发送字典</li>
<li>一个叫 QPACK Decoder Stream，用于响应对方，告诉它刚发的字典已经更新到自己的本地动态表了，后续就 可以使用这个字典来编码了</li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>

        

        
            <div class="article-nav">
                
                    <div class="article-prev">
                        <a class="prev"
                           rel="prev"
                           href="/2021/06/15/%E7%BD%91%E7%BB%9C-03-TCP/"
                        >
                            <span class="left arrow-icon flex-center" >
                              <i class="fas fa-chevron-left"></i>
                            </span>
                            <span class="title flex-center">
                                <span class="post-nav-title-item">网络-03-TCP</span>
                                <span class="post-nav-item">Prev posts</span>
                            </span>
                        </a>
                    </div>
                
                
                    <div class="article-next">
                        <a class="next"
                           rel="next"
                           href="/2021/05/29/%E7%BD%91%E7%BB%9C-02-HTTP/"
                        >
                            <span class="title flex-center">
                                <span class="post-nav-title-item">网络-02-HTTP</span>
                                <span class="post-nav-item">Next posts</span>
                            </span>
                            <span class="right arrow-icon flex-center" >
                              <i class="fas fa-chevron-right"></i>
                            </span>
                        </a>
                    </div>
                
            </div>
        

        
    </div>
</div>


                    
                </main>

            </div>

            <div class="page-main-content-bottom">
                <footer class="footer">
    <div class="info-container">
        <div class="copyright-info info-item">
            &copy;
            
              <span>2020</span> -
            
            2021 <i class="fas fa-heart icon-animate"></i> <a href="/">win</a>
        </div>
        
        <div class="theme-info info-item">
            Powered by <a target="_blank" href="https://hexo.io">Hexo</a> | Theme <a class="theme-version" target="_blank"></a>
        </div>
    </div>
</footer>

            </div>
        </div>
    </main>

    <div class="sidebar-tools">
        <div class="tools-container">
    <ul class="tools-list">
        

        

        <!-- TOC aside toggle -->
        
            <li class="tools-item page-aside-toggle">
                <i class="fas fa-outdent"></i>
            </li>
        

    </ul>
</div>

    </div>

    <div class="right-bottom-side-tools">
        <div class="side-tools-container">

    <ul class="side-tools-list">
        <li class="tools-item tool-font-adjust-plus flex-center">
            <i class="fas fa-search-plus"></i>
        </li>

        <li class="tools-item tool-font-adjust-minus flex-center">
            <i class="fas fa-search-minus"></i>
        </li>

        <li class="tools-item tool-expand-width flex-center">
            <i class="fas fa-arrows-alt-h"></i>
        </li>

        <li class="tools-item tool-dark-light-toggle flex-center">
            <i class="fas fa-moon"></i>
        </li>

        <!-- rss -->
        

        <li class="tools-item tool-scroll-to-top flex-center">
            <i class="fas fa-arrow-up"></i>
        </li>

        <li class="tools-item tool-scroll-to-bottom flex-center">
            <i class="fas fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="tools-ul-1">
        <li class="tools-item tool-toggle-show flex-center">
            <i class="fas fa-cog fa-spin"></i>
        </li>

    </ul>
</div>

    </div>

    <!-- page aside -->
    <aside class="page-aside">
        
            <div class="post-toc-wrap">
    <div class="post-toc">
        <ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#5-HTTPS%E5%A6%82%E4%BD%95%E4%BC%98%E5%8C%96"><span class="nav-text">5 HTTPS如何优化</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#5-1-%E5%88%86%E6%9E%90%E6%80%A7%E8%83%BD%E6%8D%9F%E8%80%97"><span class="nav-text">5.1 分析性能损耗</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-2-%E7%A1%AC%E4%BB%B6%E4%BC%98%E5%8C%96"><span class="nav-text">5.2 硬件优化</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-3-%E8%BD%AF%E4%BB%B6%E4%BC%98%E5%8C%96"><span class="nav-text">5.3 软件优化</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-4-%E5%8D%8F%E8%AE%AE%E4%BC%98%E5%8C%96"><span class="nav-text">5.4 协议优化</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#5-4-1-%E5%AF%86%E9%92%A5%E4%BA%A4%E6%8D%A2%E7%AE%97%E6%B3%95%E4%BC%98%E5%8C%96"><span class="nav-text">5.4.1 密钥交换算法优化</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-5-TLS%E5%8D%87%E7%BA%A7"><span class="nav-text">5.5 TLS升级</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-6-%E8%AF%81%E4%B9%A6%E4%BC%98%E5%8C%96"><span class="nav-text">5.6 证书优化</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#5-6-1-%E8%AF%81%E4%B9%A6%E4%BC%A0%E8%BE%93%E4%BC%98%E5%8C%96"><span class="nav-text">5.6.1 证书传输优化</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#5-6-2-%E8%AF%81%E4%B9%A6%E9%AA%8C%E8%AF%81%E4%BC%98%E5%8C%96"><span class="nav-text">5.6.2 证书验证优化</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-7-%E4%BC%9A%E8%AF%9D%E5%A4%8D%E7%94%A8"><span class="nav-text">5.7 会话复用</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#5-7-1-Session-ID"><span class="nav-text">5.7.1 Session ID</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-7-2-Session-Ticket"><span class="nav-text">5.7.2 Session Ticket</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-7-3-Pre-shared-Key"><span class="nav-text">5.7.3 Pre-shared Key</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-HTTP-2%E7%89%B9%E6%80%A7"><span class="nav-text">6 HTTP&#x2F;2特性</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#6-1-HTTP-1-1-%E5%8D%8F%E8%AE%AE%E7%9A%84%E6%80%A7%E8%83%BD%E9%97%AE%E9%A2%98"><span class="nav-text">6.1 HTTP&#x2F;1.1 协议的性能问题</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-2-%E5%85%BC%E5%AE%B9HTTP-1-1"><span class="nav-text">6.2 兼容HTTP&#x2F;1.1</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-3-%E5%A4%B4%E9%83%A8%E5%8E%8B%E7%BC%A9"><span class="nav-text">6.3 头部压缩</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#6-3-1-%E9%9D%99%E6%80%81%E8%A1%A8%E7%BC%96%E7%A0%81"><span class="nav-text">6.3.1 静态表编码</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#6-3-2-%E5%8A%A8%E6%80%81%E8%A1%A8%E7%BC%96%E7%A0%81"><span class="nav-text">6.3.2 动态表编码</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-4-%E4%BA%8C%E7%BA%A7%E5%88%B6%E5%B8%A7"><span class="nav-text">6.4 二级制帧</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-5-%E5%B9%B6%E5%8F%91%E4%BC%A0%E8%BE%93"><span class="nav-text">6.5 并发传输</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-6-%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%BB%E5%8A%A8%E6%8E%A8%E9%80%81%E8%B5%84%E6%BA%90"><span class="nav-text">6.6 服务器主动推送资源</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-HTTP-3%E7%89%B9%E6%80%A7"><span class="nav-text">7 HTTP&#x2F;3特性</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#7-1-HTTP-2%E7%BC%BA%E9%99%B7"><span class="nav-text">7.1 HTTP&#x2F;2缺陷</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#7-2-QUIC%E5%8D%8F%E8%AE%AE"><span class="nav-text">7.2 QUIC协议</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#7-3-HTTP-3%E5%8D%8F%E8%AE%AE"><span class="nav-text">7.3 HTTP&#x2F;3协议</span></a></li></ol></li></ol>
    </div>
</div>
        
    </aside>

    <!-- image viewer -->
    <div class="image-viewer-container">
    <div class="img-box">
        <img src="">
    </div>
</div>


</div>




<script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.0.4/source/js/utils.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.0.4/source/js/main.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.0.4/source/js/header-shrink.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.0.4/source/js/back2top.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.0.4/source/js/dark-light-toggle.js"></script>





    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.0.4/source/js/left-side-toggle.js"></script>

    
        <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.0.4/source/js/code-copy.js"></script>
    

    
        <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.0.4/source/js/libs/anime.min.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.0.4/source/js/toc.js"></script>
    


</body>
</html>